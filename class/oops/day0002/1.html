<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script>
function Stack() {

    let items = [];

    this.push = function(element){
        items.push(element);
    };

    this.pop = function(){
        return items.pop();
    };

    this.peek = function(){
        return items[items.length-1];
    };

    this.isEmpty = function(){
        return items.length == 0;
    };

    this.size = function(){
        return items.length;
    };

    this.clear = function(){
        items = [];
    };

    this.print = function(){
        console.log(items);
    };

}

function parenthesesChecker(symbols){
	console.log('symbols is ', symbols);
	let stack = new Stack(),
        balanced = true,
        index = 0,
        symbol, top,
        opens = "([{",
        closers = ")]}";
	while (index < symbols.length && balanced){
		symbol = symbols.charAt(index);
		console.log('index is ', index, ', and len is ', symbols.length, ', char is ', symbol, ', ', opens.indexOf(symbol));
		if (opens.indexOf(symbol) >= 0) {
			stack.push(symbol);
			console.log(`open symbol - stacking ${symbol}`);
		} else {
			console.log(`close symbol ${symbol}`);
			if (stack.isEmpty()){
				balanced = false;
				console.log('Stack is empty, no more symbols to pop and compare');
			}  else {
				top = stack.pop();
				console.log('top: ', top, ', opens.indexOf(top): ', opens.indexOf(top), ', closers.indexOf(symbol): ', closers.indexOf(symbol));
				if (!(opens.indexOf(top) === closers.indexOf(symbol))) {
                    balanced = false;
                    console.log(`poping symbol ${top} - is not a match compared to ${symbol}`);
                } else {
                    console.log(`poping symbol ${top} - is is a match compared to ${symbol}`);
                }
			}
			
		}
		console.log('stack is ', stack.print());
		index++;
	}
	
	if (balanced && stack.isEmpty()){
        return true;
    }
	
	return false;
}

console.log(parenthesesChecker('{([])}}')); 
</script>
</head>

<body>
</body>
</html>
